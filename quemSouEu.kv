#:kivy 1.0.9

#: import ListAdapter kivy.adapters.listadapter.ListAdapter
#: import ListItemButton kivy.uix.listview.ListItemButton


<MenuPrincipal>:
    FloatLayout:
        Button:
            size_hint: (.5, .15)
            pos_hint: {'center_x':.5, 'center_y':.80}
            # background_normal: ''
            # background_color: [0,0,0,0]
            text: 'Jogar'
            on_press: root.manager.current = 'listaBibliotecaJogar'

        Button:
            size_hint: (.5, .15)
            pos_hint: {'center_x':.5, 'center_y':.60}
            # background_normal: ''
            # background_color: [0,0,0,0]
            text: 'Baixar Bibliotecas'
            on_press: root.manager.current = 'listaBibliotecaBaixar'

        Button:
            size_hint: (.5, .15)
            pos_hint: {'center_x':.5, 'center_y':.40}
            size: root.width/2, root.height/6
            text: 'Bibliotecas Locais'
            on_press: root.manager.current = 'listaBiblioteca'

        Button:
            size_hint: (.5, .15)
            pos_hint: {'center_x':.5, 'center_y':.20}
            size: root.width/2, root.height/6
            text: 'Sair'
            on_press: app.stop()

<ListaBiblioteca>
    nome_biblioteca: input_biblioteca
    lista_view: lista

    FloatLayout:
        TextInput:
            id: input_biblioteca
            on_text_validate: root.criar_biblioteca()
            multiline: False
            font_size: 30
            # Ao escolher a altura do input como 0, o kivy o cria com a sua altura minima, uma linha
            size_hint: (1, .1)
            height: self.minimum_height
            pos_hint: {'center_x':.5, 'y':.9}

        Button:
            size_hint: (.4, .1)
            pos_hint: {'center_x':.25, 'y':.8}
            text: 'Nova'
            on_press: root.criar_biblioteca()

        Button:
            size_hint: (.4, .1)
            pos_hint: {'center_x':.75, 'y':.8}
            text: 'Editar'
            on_press: root.editar_biblioteca()



        ListView:
            id: lista
            size_hint: (1, .7)
            pos_hint: {'center_x':.5, 'center_y':.45}
            adapter:
                ListAdapter(
                data=root.lista_bibliotecas,
                selection_mode='single',
                allow_empty_selection=False,
                cls=ListItemButton)
            canvas.before:
                Color:
                    rgb: 0,0,0
                Rectangle:
                    pos: self.pos
                    size: self.size

        Button:
            size_hint: (.2, .1)
            pos_hint: {'center_x':.1, 'center_y':.05}
            text: 'Retornar'
            on_press: root.parent.current = 'menu'


<EditaBiblioteca>
    nome_item: input_item
    lista_view: lista
    biblioteca_label: nome_biblioteca

    FloatLayout:
        Label:
            id: nome_biblioteca
            font_size:30
            size_hint:(.1, .1)
            pos_hint: {'center_x':.5, 'center_y':.95}
            color: [1, 1, 1, 1]
        TextInput:
            id: input_item
            on_text_validate: root.criar_item()
            multiline: False
            font_size: 30
            # Ao escolher a altura do input como 0, o kivy o cria com a sua altura minima, uma linha
            size_hint: (1, .1)
            height: self.minimum_height
            pos_hint: {'center_x':.5, 'center_y':.85}

        Button:
            size_hint: (.5, .1)
            pos_hint: {'center_x':.25, 'center_y':.75}
            text: 'Novo Item'
            on_press: root.criar_item()

        Button:
            size_hint: (.5, .1)
            pos_hint: {'center_x':.75, 'center_y':.75}
            text: 'Remover Item'
            on_press: root.remover_item()

        ListView:
            id: lista
            size_hint: (1, .6)
            pos_hint: {'center_x':.5, 'center_y':.40}
            adapter:
                ListAdapter(
                data=root.lista_itens,
                selection_mode='multiple',
                allow_empty_selection=True,
                cls=ListItemButton)
            canvas.before:
                Color:
                    rgb: 0,0,0
                Rectangle:
                    pos: self.pos
                    size: self.size

        Button:
            size_hint: (.2, .1)
            pos_hint: {'center_x':.1, 'center_y':.05}
            text: 'Retornar'
            on_press: root.parent.current = 'menu'
                    

<ListItemButton>
    selected_color: 0, 0, 1, 1
    deselected_color: 0, 0, 0, 1


<ListaBibliotecaParaJogar>
    lista_view: lista
    FloatLayout:
        Button:
            size_hint: (.5, .1)
            pos_hint: {'center_x':.5, 'center_y':.95}
            text: 'Escolher'
            on_press: root.jogar()

        ListView:
            id: lista
            size_hint: (.8, .9)
            pos_hint: {'center_x':.5, 'center_y':.45}
            adapter:
                ListAdapter(
                data=root.lista_bibliotecas,
                selection_mode='single',
                allow_empty_selection=False,
                cls=ListItemButton)
            canvas.before:
                Color:
                    rgb: 0,0,0
                Rectangle:
                    pos: self.pos
                    size: self.size
                    

<Jogo>
    contagem: label_contagem
    item: label_item
    FloatLayout:
        Label:
            id: label_contagem
            font_size:30
            pos_hint: {'center_x':.5, 'center_y':.9}
            color: [1, 1, 1, 1]

    FloatLayout:
        Label:
            id: label_item
            font_size:40
            pos_hint: {'center_x':.5, 'center_y':.5}
            color: [1, 1, 1, 1]
            

<ListaBibliotecaParaBaixar>
    lista_view: lista

    FloatLayout:
        Button:
            size_hint: (.5, .1)
            pos_hint: {'center_x':.5, 'center_y':.90}
            text: 'Baixar'
            on_press: root.baixar_biblioteca()

        ListView:
            id: lista
            size_hint: (.8, .7)
            pos_hint: {'center_x':.5, 'center_y':.45}
            adapter:
                ListAdapter(
                data=root.lista_bibliotecas,
                selection_mode='single',
                allow_empty_selection=False,
                cls=ListItemButton)
            canvas.before:
                Color:
                    rgb: 0,0,0
                Rectangle:
                    pos: self.pos
                    size: self.size
            
        Button:
            size_hint: (.2, .1)
            pos_hint: {'center_x':.1, 'center_y':.05}
            text: 'Retornar'
            on_press: root.parent.current = 'menu'    